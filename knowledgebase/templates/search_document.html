{% extends 'main.html' %}
{% load static %}
{% static "" as baseUrl %}


{% block style_content %}

    <style>

        html {
            scroll-behavior: smooth;
        }
        

        .container {
            max-width: 100% !important;
        }

        .container-fluid {
            padding-left: 10px;
            padding-right: 10px;
        }


        .section-title {
            margin-bottom: 15px;
        }

        .section-title p {
            max-width: none;
        }

        
        .breadcrumb_area {
            padding: 0;
            background: none;
        }

            .breadcrumb_area .banner_search_form {
                max-width: 770px;
                position: relative;
                z-index: 5;
            }
            
            .breadcrumb_area .banner_search_form .form-control {
                height: 65px;
            }
            
            .breadcrumb_area .banner_search_form button {
                background: #10b3d6;
            }
            
            .breadcrumb_area .custom-select {
                line-height: 65px;
                z-index: 3;
            }
            
            .breadcrumb_area .custom-select:before {
                width: 1px;
                content: "";
                position: absolute;
                left: 0;
                top: 15px;
                bottom: 15px;
                background: #e2e7e9;
                z-index: 1;
            }
            

                
        .banner_search_form {
            max-width: 570px;
            margin: 0 auto;
            display: flex;
        }
            
            .banner_search_form .form-control {
                height: 70px;
                border-radius: 4px;
                padding-left: 30px;
                font-size: 14px;
                border: 0;
                border-radius: 4px;
                border-top-right-radius: 0;
                border-bottom-right-radius: 0;
                box-shadow: none;
                color: #1d2746;
            }
            
            .banner_search_form .form-control.placeholder {
                color: #848996;
            }
            
            .banner_search_form .form-control:-moz-placeholder {
                color: #848996;
            }
            
            .banner_search_form .form-control::-moz-placeholder {
                color: #848996;
            }
            
            .banner_search_form .form-control::-webkit-input-placeholder {
                color: #848996;
            }
            
            .banner_search_form button {
                padding: 5px 25px;
                font-size: 20px;
                background: #10b3d6;
                color: #fff;
                text-align: center;            
                border: 0;                        
                border-top-left-radius: 0;
                border-bottom-left-radius: 0;
                transition: all 0.4s linear;
            }

            
        .categories-guide-item {
            padding: 0px !important;
            background: transparent !important;
            box-shadow: none !important;
        }

        .categories-guide-item img {
            margin-bottom: 0px !important;
        }

        .tab-pane {
            margin-top: 75px;
        }

        .tab-content {
            padding: 0 20px;
            box-shadow: 5px 6px 5px 0 rgba(33, 39, 40, 0.2);
            border: 1px Solid rgba(130, 148, 151, 0.2)
        }

        .com-title {
            font-size: 0.8rem !important;
            font-style: italic;
            text-transform: uppercase;
        }

        .community-box {
            padding: 20px 15px;
            box-shadow: 1px 2px 3px 2px rgba(2, 47, 57, 0.14);
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .community-content {
            min-height: 160px;
        }

        .fact-navigation-info {
            box-shadow: 5px 6px 5px 0 rgba(33, 39, 40, 0.2);
            padding: 40px 30px 28px;
            border: 1px Solid rgba(130, 148, 151, 0.2)
        }

        .org-content {
            /* background-color: #dde3ee; */
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px;
            height: 120px;
            min-width: 120px;
            box-shadow: 1px 2px 3px 2px rgba(75, 150, 175, 0.25);

            background-image: linear-gradient(to left bottom, #eee, #ecedee, #f4f4f4, #e7eaee, #e4e9ee);
            background-image: url(/static/img/banner_back/bann1.jpg);
        }

        .org-content:hover {
            border: 1px solid #ccc;
            box-shadow: 2px 3px 5px 4px rgba(25, 75, 175. 0.50);
            box-shadow: 1px 5px 15px 3px rgba(70, 100, 150, 0.25);
        }

        .org-logo {
            width: 90px; 
            margin-bottom: 10px;
        }

        .org-logo-BWDB {
        }
        .org-logo-RRI {
            width: 72px;
        }
        .org-logo-JRC {
        }    
        .org-logo-DBHWD {
        }        
        .org-logo-WARPO {
            margin-top: 15px;
            margin-bottom: 17px;
        }    
        .org-logo-IWM {
            margin-top: 5px;
            margin-bottom: 20px;
        }   
        .org-logo-CEGIS {
            margin-top: 20px;
            margin-bottom: 30px;
        }

        
        .org-name-title {
            display: block;
            margin-bottom: 5px;
            padding: 8px;
            padding-left: 10px;
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            text-align: left;
            background-image: linear-gradient(60deg, rgb(15, 180, 185) 0%, rgb(0, 40, 100) 100%);
            border-radius: 4px;
        }
            .org-name-title:hover {
                color: #aef;
            }

        .cat-name-title {
            display: block;
            border-left: 3px solid #1ab;
            margin: 5px;
            padding: 5px;
            padding-left: 8px;
            color: #135;
            font-size: 14px;
            text-align: left;
            background: rgba(25, 175, 235, 0.05);
            border-radius: 0 !important;
        }
            .cat-name-title:hover {
                border-left: 4px solid #2cf;
                color: #08c;
            }

        .data-cat-title {
            display: block;
            margin-bottom: 10px;
            padding: 8px;
            padding-left: 10px;
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            text-align: left;
            background-image: linear-gradient(60deg, rgb(15, 180, 185) 0%, rgb(0, 40, 100) 100%);
            border-radius: 4px;
        }

    </style>

{% endblock %}


{% block content %}

<div class="container-fluid mt-2 pl-3 pr-3">
    <div class="row">
        <div class="col-12">
            <div class="row">
                <div class="col-md-1 text-left">
                    <a href="{% url 'home' %}" class="doc_border_btn m-1 pt-2 pb-2 pl-3 pr-3">
                        <i class="arrow_left m-0"></i> Back
                    </a>
                </div>
                <div class="col-md-10 text-center">
                    <h5 class="wow fadeInUp mt-3" style="color: #05a;">Search by Organization</h5>
                </div>
                <div class="col-md-1 text-right">
                </div>
            </div>
        </div>
    </div>

</div>


<div class="container mt-1 mb-3">
    <div class="row">
            
        <div class="col-12 col-lg-10 col-xlg-8 ml-auto mr-auto">

            <div class="row">
                <div class="col-md-12">
                    <form action="." method="GET">
                        <!-- List of Organization -->
                        <section>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row wow fadeInUp">
                                                
                                            {% for org_info in org_infos %}                                        
                                                <div class="col text-center">
                                                    <label for="src_org_{{org_info.short_name}}">
                                                        <div class="text-center org-content wow fadeInUp" data-bs-toggle="tooltip" data-bs-html="true"
                                                            style="background-image: url(/static/img/org_img/bg/{{org_info.short_name}}.jpg);" title="{{org_info.organization_name}} ({{org_info.short_name}})">                                                    
                                                            
                                                            {% comment %} <img src="/static/img/org_img/logo/{{org_info.short_name}}.png" alt="{{org_info.organization_name}} ({{org_info.short_name}})" class="org-logo" /> {% endcomment %}
                                                            <img src="{% static 'img/org_img/logo/' %}{{org_info.short_name}}.png" alt="{{org_info.organization_name}} ({{org_info.short_name}})" class="org-logo org-logo-{{org_info.short_name}}" />
                                                            <br />
                                                            <label style="color:#4F5773;">
                                                                {{org_info.short_name}}
                                                                <input type="checkbox" class="control-input" id="src_org_{{org_info.short_name}}" name="src_orgs" 
                                                                        value="{{org_info.id}}" {% if org_info.id in src_orgs %} checked {% else %} '' {% endif %} />

                                                                {% comment %} <input type="checkbox" class="control-input" id="src_orgs_{{org_info.short_name}}" name="src_orgs" 
                                                                        value="{{org_info.id}}" {% if org_info.id in org_ids %} checked {% else %} '' {% endif %} /> {% endcomment %}
                                                            </label>
                                                        </div>
                                                    </label>
                                                </div>
                                            {% endfor %}

                                        </div>

                                    </div>
                                </div>
                        </section>
                        
                        <!-- searchbox area section    -->
                        <section>
                            <div class="breadcrumb_area">
                                <div class="banner_search_form banner_search_form_two m-0 p-0" style="max-width: 100%; border: 1px solid #13aeda;">
                                    <div class="input-group">
                                        <input type="search" id="search_term" name="search_term" class="form-control" placeholder='Search ("/" to focus)' value='{{ search_term }}' />
                                        <div class="input-group-append">
                                            {% comment %} <select class="custom-select" id="src_doc_cats" name="src_doc_cats" items="doc_cats" multiple="multiple"> {% endcomment %}
                                            <select class="custom-select" id="src_doc_cats" name="src_doc_cats" multiple="multiple">
                                                <option value="" selected>All Categories</option>
                                                <option value="1">Knowledge Base</option>
                                                <option value="2">Research & Publications</option>
                                                <option value="3">Analysis & Reporting</option>
                                                <option value="4">Documentation</option>
                                                <option value="5">Publication</option>
                                                <option value="6">Plan</option>
                                            </select>
                                        </div>
                                        <button type="submit"><i class="icon_search"></i></button>
                                    </div>
                                </div>
                            </div>
                        </section>                        
                    </form>
                </div>
            </div>

            <div class="row mt-3" id="search_result_panel">

                <div class="col-12 col-md-4 col-xl-3 col-xxl-2 wow fadeInUp">
                    <h5 class="border-bottom pb-2" style="color: #05a;"><i class="fa-solid fa-list-check"></i> Selected Organization</h5>
                                            
                    <div class="pt-3 pl-3 pr-3 sticky-top" style="top: 75px; max-height: 85vh; overflow-y: auto; background: #f7fafc; ">                        
                        <div class="nav flex-column">
                            
                            {% for doc in documents %}
                                {% ifchanged doc.organization.organization_name %}
                                    <a class="nav-link org-name-title" data-wow-delay="0.2s" href="#{{doc.organization.short_name}}_{{doc.organization_id}}_{{doc.data_category_id}}">
                                        <i class="fa-solid fa-list fa-fw"></i> {{doc.organization.organization_name}} ({{doc.organization.short_name}})
                                    </a>
                                {% endifchanged %}

                                {% ifchanged doc.data_category.category_name %}
                                    <a class="nav-link cat-name-title" href="#{{doc.organization.short_name}}_{{doc.organization_id}}_{{doc.data_category_id}}">
                                        {% comment %}wow fadeInUp <i class="fa-solid fa-circle"></i><i class="fa-solid fa-square"></i> <i class="fa-solid fa-square-small"></i> {% endcomment %}
                                        {{doc.data_category.category_name}}
                                    </a>
                                {% endifchanged %}
                            {% endfor %}
                        </div>
                    </div>
        
                </div>
            
                <div class="col-12 col-md-8 col-xl-9 col-xxl-10 wow fadeInUp">
                        
                    <h5 class="border-bottom pb-2" style="color: #05a;"><i class="fa-solid fa-file-magnifying-glass"></i> Search Result (<strong style="color:#047; font-size:105%;">{{doc_count}}</strong>)</h5>
                                        
                    <div class="pt-3 pl-3 pr-3" style="top: 75px;">
                    
                        {% for doc in documents %}
            
                            {% ifchanged doc.data_category.category_name %}
                                <div class="row wow fadeInUp">
                                    <div class="col-md-12">
                                        <span id='{{doc.organization.short_name}}_{{doc.organization_id}}_{{doc.data_category_id}}' class="data-cat-title" data-wow-delay="0.2s">
                                            <i class="fa-solid fa-table-list"></i> {{doc.organization.organization_name}} ({{doc.data_category.category_name}})
                                        </span>
                                    </div>
                                </div>
                            {% endifchanged %}

                            <div class="community-box p-3 wow fadeInUp">
                                <a href="">
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="icon-container">
                                                <img src="{% static 'img/home_support/saltwater.jpg' %}" alt="{{doc.title}}" width="100%" style="max-width: 250px;" />
                                                {% comment %} <img src="{% static doc.thumbnail %}" alt="{{doc.title}}" width="100%" style="max-width: 250px;" /> {% endcomment %}
                                            </div>
                                        </div>
                                        <div class="col-md-10">
                                            <table class="table table-striped table-hover w-100 border mb-0">
                                                <tr>
                                                    <td class="text-left font-weight-bold" style="width: 100px;">Title:</td>
                                                    <td class="text-left font-weight-bold">{{doc.title|truncatewords:"200"}}</td>
                                                </tr>

                                                <tr>
                                                    <td class="text-left font-weight-bold">Subject:</td>
                                                    {% comment %} <td class="text-left">{{ doc.subject|truncatewords:"100" }}</td> {% endcomment %}
                                                    <td class="text-left">{{doc.organization.organization_name}} ({{doc.data_category.category_name}})</td>
                                                </tr>

                                                <tr>
                                                    <td class="text-left font-weight-bold">Keywords:</td>
                                                    <td class="text-left">{{doc.keywords}}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </a>
                            </div>
            
                        {% endfor %}
                        
                    </div>
        
                </div>
            
            </div>
            

        </div>

    </div>
</div>

{% endblock %}



{% block script_content %}

    <script>

        //$(document).ready(function() {
        $(function() {
            //$("#navbar_org_cats").scrollspy({target: "#search_result_panel", offset: 150});

            //$("#nav_org_cats ul li a[href^='#']").on("click", function(event) {
            //    if (this.hash !== "") {
            //        event.preventDefault();
            //        var hash = this.hash;

            //        $("#search_result_panel").animate({scrollTop: $(hash).offset().top}, 1000, function() {
            //            window.location.hash = hash;
            //        });
            //    }
            //});

            

            //var nav = $("#panel_org_cats");
            //$(window).scroll(function() {
            //    if ($(window).scrollTop() >= 150) {
            //        nav.addClass("fixed-top");
            //    } else {
            //        nav.removeClass("fixed-top");
            //    }
            //});


        });
        
    </script>

{% endblock %}
